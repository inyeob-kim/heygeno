# 데이터베이스 스키마 리디자인 계획

## 개요

새로운 설계 원칙에 따라 데이터베이스 스키마를 리디자인합니다.

## 주요 변경사항

### 1. 사용자 인증
- `device_uid` 기반 인증 (로그아웃 없음)
- `email` 제거
- `nickname` 추가

### 2. 펫 프로필
- 온보딩 데이터와 1:1 매핑
- `weight_bucket_code` 제거, `weight_kg` 추가
- `body_condition_score` 추가
- `birthdate` / `approx_age_months` 추가
- 건강 고민/알레르기를 정규화 테이블로 분리

### 3. 상품/가격
- `final_price` (배송/할인 포함) 표준화
- 성분 분석 테이블 추가
- 알레르겐 필터링 구조

### 4. 추천 시스템
- 추천 로그 테이블 추가
- 추천 이유 저장

## 마이그레이션 전략

이 변경사항은 매우 크므로 다음 순서로 진행:

1. **모델 파일 업데이트** (우선)
2. **autogenerate로 마이그레이션 생성**
3. **수동으로 데이터 마이그레이션 로직 추가**

또는 제공된 SQL을 기반으로 수동 마이그레이션 작성

## 다음 단계

모델 파일들을 먼저 업데이트한 후 마이그레이션을 생성하는 것을 권장합니다.
